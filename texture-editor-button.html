<!-- texture-editor-tshirt-button.html (v1.0) -->


<li style="margin:10px -18px;list-style-type:square;">Texture Editor:</li>
<div id="tshirt-texture-editor-button" class="form-control btn btn-default btn-white-outline gradient-btn">Open texture editor panel</div>



<script>

    var tshirtTextureEditorButtonSelector = "#tshirt-texture-editor-button";

//  Outfit is not avaliable.
    $(tshirtTextureEditorButtonSelector).on("click", function (){
        if ( !localPlayer.outfit ) {
            var msg = "Outfit not defined.";
            bootboxErrorAlert(msg);
        }
    });


//  Tshirt is not avaliable.
    $(tshirtTextureEditorButtonSelector).on("click", function (){
        if ( !localPlayer.outfit["tshirt"] ) {
            var msg = "Tshirt not defined.";
            bootboxErrorAlert(msg);
        }
    });


//  Material is not avaliable.
    $(tshirtTextureEditorButtonSelector).on("click", function (){
        if ( !localPlayer.outfit["tshirt"].material.materials[0] ) {
            var msg = "Material not defined.";
            bootboxErrorAlert(msg);
        }
    });


//  Texture is not avaliable.
    $(tshirtTextureEditorButtonSelector).on("click", function (){
        if ( !localPlayer.outfit["tshirt"].material.materials[0].map ) {
            var msg = "Texture not defined.";
            bootboxErrorAlert(msg);
        }
    });


//  Define holder.
    $(tshirtTextureEditorButtonSelector).on("click", function (){

        if ( !localPlayer.outfit["tshirt"].material.materials[0].map ) return;

        if ( !$EditorPanel.active ){
            editorHolderButton = this;
        } else {
            editorHolderButton = undefined;
        }

    });


//  Define target (texture).
    $(tshirtTextureEditorButtonSelector).on("click", function (){

        if ( !localPlayer.outfit["tshirt"].material.materials[0].map ) return;

        if ( !$EditorPanel.active ){
            target = localPlayer.outfit["tshirt"].material.materials[0].map;
        } else {
            target = undefined;
        }
    });


//  Import dialog form component and apply dialog option.
    $(tshirtTextureEditorButtonSelector).on("click", function(){

        if ( !target ) return;

        if ( !$EditorPanel.active ) {

            var option = {
                width: 616,
                minWidth: 616,
                maxWidth: 616,
                height: 650,
                minHeight: 650,
                maxHeight: 650,
                title: "Tshirt Texture Editor",
            }

            var component = "texture-editor-panel.html";
            $EditorPanel.loadComponent(component, option);
        }

    });


//  Open/Close dialog.
    $(tshirtTextureEditorButtonSelector).on("click", function(){

        if ( !$EditorPanel.active ) {
            if ( !target ) return;

            $EditorPanel.dialog("open");

        //  Stop outfit animation.
            localPlayer.outfit.AnimationsHandler.stop();

        } else {

            $EditorPanel.dialog("close");

        }
    });

</script>



















<style>
    .helpers a { font-size:16px; font-weight:bold; cursor:pointer; text-decoration:none; } 
</style>
<br/><hr/>
<li id="ground-helper" class="helpers">
    <a>Hide ground helper</a>
</li>
<li id="origin-helper" class="helpers">
    <a>Hide origins helper</a>
</li>
<li id="axis-helper" class="helpers">
    <a>Hide axis helper</a>
</li>
<li id="player-helper" class="helpers">
    <a>Hide Player helpers</a>
</li>
<li id="label-helper" class="helpers">
    <a>Pick up a nickname</a>
</li>
<li id="joysticks-helper" class="helpers">
    <a>Hide joysticks</a>
</li>
<li id="connect-helper" class="helpers">
    <a>Disconnect</a>
</li>
<li id="store-helper" class="helpers">
    <a>Clear Storage</a>
</li>


<hr/>

<script>

    var groundHelperSelector = "#ground-helper a";
    var originHelperSelector = "#origin-helper a";
    var axisHelperSelector   = "#axis-helper a";

    var labelHolderSelector = "#label-helper";
    var labelHelperSelector = "#label-helper a";

    var joysticksHelperSelector  = "#joysticks-helper a";
    var joystickControlsSelector = ".joystick-controls";

    var connectHelperHolder   = "#connect-helper";
    var connectHelperSelector = "#connect-helper a";
    
    var playerHelperHolder = "#player-helper";
    var playerHelperSelector = "#player-helper a";

    var storeHelperSelector = "#store-helper a";


                    //  Initialize.

    (function(){

        if (!debugMode) $(connectHelperHolder).slideUp(); //  IMPORTANT  //
        if (!debugMode) $(playerHelperHolder).slideUp(); //  IMPORTANT  //

        if (groundHelper.visible) {
            $(groundHelperSelector).text("Hide ground helper");
        } else {
            $(groundHelperSelector).text("Show ground helper");
        }

        if (axisOriginHelper.visible) {
            $(originHelperSelector).text("Hide origins helper");
        } else {
            $(originHelperSelector).text("Show origins helper");
        }

        if (axisCustomHelper.visible) {
            $(axisHelperSelector).text("Hide axis helper");
        } else {
            $(axisHelperSelector).text("Show axis helper");
        }
        
        if ( localPlayer.holder.visible ) {
            $(playerHelperSelector).text("Hide player helper");
        } else {
            $(playerHelperSelector).text("Show player helper");
        }

        if ( !!localPlayer.label ){
            if (localPlayer.label.visible) 
                $(labelHelperSelector).text("Hide nicknames");
            else 
                $(labelHelperSelector).text("Show nicknames");
        } else {
            $(labelHolderSelector).slideUp();
        }

    })();


    $(groundHelperSelector).on("click", function(){
        groundHelper.visible = !groundHelper.visible;
        if (groundHelper.visible) 
            $(groundHelperSelector).html("Hide ground helper");
        else 
            $(groundHelperSelector).html("Show ground helper");
    });

    $(originHelperSelector).on("click", function(){
        axisOriginHelper.visible = !axisOriginHelper.visible;
        if (axisOriginHelper.visible) 
            $(originHelperSelector).text("Hide origins helper");
        else 
            $(originHelperSelector).text("Show origins helper");
    });

    $(axisHelperSelector).on("click", function(){
        axisCustomHelper.visible = !axisCustomHelper.visible;
        if (axisCustomHelper.visible) 
            $(axisHelperSelector).text("Hide axis helper");
        else 
            $(axisHelperSelector).text("Show axis helper");
    });

    $(playerHelperSelector).on("click", function(){
        localPlayer.holder.visible = !localPlayer.holder.visible;
        if ( localPlayer.holder.visible )
            $(playerHelperSelector).text("Hide player helper");
        else
            $(playerHelperSelector).text("Show player helper");
    });

    $(storeHelperSelector).on("click", function(){
        var result = confirm("Are you sure to clear cache?");
        if (result) store.clear();
    });

    $(labelHelperSelector).on("click", function(){
        localPlayer.label.visible = !localPlayer.label.visible;
        for (var id in RemotePlayersManager){
            var remotePlayer = RemotePlayersManager[id];
            remotePlayer.label.visible = localPlayer.label.visible;
        }
        if (localPlayer.label.visible) 
            $(labelHelperSelector).text("Hide nicknames");
        else 
            $(labelHelperSelector).text("Show nicknames");
    });
/*
    $(labelHelperSelector).one("click", function(){
        if ( localPlayer.label ) return;

        var self = this;
        keyInputControls.Off();  // IMPORTANT //

        bootbox.prompt({
            title: "Type a nickname:", 
            size: "small",
            closeButton: true,
            callback: function(result){

                if (!!result && result != ""){
                    localPlayer.label = new PlayerLabel( result );
                    $(self).off("click");
                    keyInputControls.On();  // IMPORTANT //

                //  Initialize label helper.
                    if (localPlayer.label.visible) 
                        $(labelHelperSelector).text("Hide nicknames");
                    else if (!localPlayer.label.visible) 
                        $(labelHelperSelector).text("Show nicknames");

                    $(labelHelperSelector).on("click", function(){
                        localPlayer.label.visible = !localPlayer.label.visible;
                        for (var id in RemotePlayersManager){
                            var remotePlayer = RemotePlayersManager[id];
                            remotePlayer.label.visible = localPlayer.label.visible;
                        }
                        if (localPlayer.label.visible) 
                            $(labelHelperSelector).text("Hide nicknames");
                        else 
                            $(labelHelperSelector).text("Show nicknames");
                    });

                //  SocketCluster connect.
                    socketclusterConnect();

                //  Show connect helper.
                    $(connectHelperHolder).slideDown();  // IMPORTANT //

                } else {
                //  TODO: You must pick up an nickname alert.
                    return true;
                }
            }
        });

    });
*/
                //  Joysticks Helper.

//  Initialize.

    (function(){
    //  Joysticks must be visible at startup.
        $(joysticksHelperSelector)[0].active = true;
    })();

    $(joysticksHelperSelector).on("click", function(){

    //  Joysticks must be visible at startup.
        $(joystickControlsSelector).toggleClass("hidden");

        this.active = !this.active;

        if (this.active) {
            $(joysticksHelperSelector).text("Hide joystick controls");
        } else {
            $(joysticksHelperSelector).text("Show joystick controls");
        }
    });

                //  Connection Helper.

//  Initialize.

    (function(){
        if (!socket || (!!socket && socket.state != "open") )
            $(connectHelperSelector).text("Connect to server");
        else 
            $(connectHelperSelector).text("Disconnect from server");
    })();

//  SocketCluster connection.
    $(connectHelperSelector).on("click", function(){

        if ( !localPlayer.label ) {
        //  console.error("You must pick up a nickname to connect to server.");
        //  return;
        }

        if (!socket) {
        //  socketclusterConnect(); 
        //  return;
        }

        if (socket.state == "open" ) {
            socket.disconnect();
            $(connectHelperSelector).text("Connect to server");
        } else {
            socket.connect();
            $(connectHelperSelector).text("Disconnect from server");
        }



    });

</script>

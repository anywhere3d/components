<style>
    .spinner-helper { display:inline-block; height:100%; vertical-align:middle; }
    .spinner-img { height:64px; vertical-align:middle; }
</style>

<!-- div id="outfit-body-male-skin-col" class="col-md-6 col-panel" -->

<h4>Select male skintone:</h4>

<a id="skin-map-hmSkinLight" name="hmSkinLight" class="nav-link btn btn-default btn-white-outline skin-texture-btn" 
style="width:79px; height:79px; background-image: url('/img/hmSkinLight.png'); background-size: contain; 
background-position:50% 50%; background-repeat:no-repeat;" title="Skin: hmSkinLight"></a>

<a id="skin-map-hmSkinMedium" name="hmSkinMedium" class="nav-link btn btn-default btn-white-outline skin-texture-btn" 
style="width:79px; height:79px; background-image: url('/img/hmSkinMedium.png'); background-size: contain; 
background-position:50% 50%; background-repeat:no-repeat;" title="Skin: hmSkinMedium"></a>

<a id="skin-map-hmSkinDark" name="hmSkinDark" class="nav-link btn btn-default btn-white-outline skin-texture-btn" 
style="width:79px; height:79px; background-image: url('/img/hmSkinDark.png'); background-size: contain; 
background-position:50% 50%; background-repeat:no-repeat;" title="Skin: hmSkinDark"></a>

<!-- /div -->


<script>

//    var spinner = '<div class="spinner spinner-loading">'
//    + '<span class="spinner-helper"></span>'
//    + '<img class="spinner-img" src="/img/load.gif">'
//    + '</div>';

</script>


<script>

    var debugMode;

    var spinner = '<span class="spin spinner-helper"></span>'
    + '<img class="spin spinner-img" src="/img/load.gif">';

    var hmSkinLightSelector  = "#skin-map-hmSkinLight";
    var hmSkinMediumSelector = "#skin-map-hmSkinMedium";
    var hmSkinDarkSelector   = "#skin-map-hmSkinDark";

    $(hmSkinLightSelector).one( "click", oneClickhmSkinLight );

    function oneClickhmSkinLight(){
        var self = this;

        $(this).append( spinner );

        textureSkinLoader({
            id    : "2xafKkK",
            ext   : "jpg",
            map   : "emissiveMap",
            name  : "HM_Skin_Light",
            index : 0,
            asset : Avatars[ "hmBody" ],
            callback: function(){
                $(".spin").remove();
                $(self).one("click", oneClickhmSkinLight);
                debugMode && console.log("oneClickhmSkinLight");
            }
        });
    }


    $(hmSkinMediumSelector).one( "click", oneClickhmSkinMedium );

    function oneClickhmSkinMedium(){
        var self = this;

        $(this).append( spinner );

        textureSkinLoader({
            id    : "4h9rLSg",
            ext   : "jpg",
            map   : "emissiveMap",
            name  : "HM_Skin_Mid",
            index : 0,
            asset : Avatars[ "hmBody" ],
            callback: function(){
                $(".spin").remove();
                $(self).one("click", oneClickhmSkinMedium);
                debugMode && console.log("oneClickhmSkinMedium");
            }
        });
    }


    $(hmSkinDarkSelector).one( "click", oneClickhmSkinDark );

    function oneClickhmSkinDark(){
        var self = this;

        $(this).append( spinner );

        textureSkinLoader({
            id    : "mAZgsw8",
            ext   : "jpg",
            map   : "emissiveMap",
            name  : "HM_Skin_Dark",
            index : 0,
            asset : Avatars[ "hmBody" ],
            callback: function(){
                $(".spin").remove();
                $(self).one("click", oneClickhmSkinDark);
                debugMode && console.log("oneClickhmSkinDark");
            }
        });
    }

    function textureSkinLoader( options, callback ){

        var dot   = ".";
        var host  = "https://i.imgur.com/";
        var url   = host + options.id + dot + options.ext;
        var map   = options.map;
        var name  = options.name;
        var index = options.index;
        var asset = options.asset;

        var img = new Image();
        img.crossOrigin = "anonymous";
        $(img).one("load", function (){
            var texture = new THREE.Texture( img ); // or canvas //
            texture.name = name;
            texture.sourceFile = url;
            applyTexture( asset, texture, map, index );
            $(img).remove();
            options.callback();
        });

        img.src = url;
    }

</script>














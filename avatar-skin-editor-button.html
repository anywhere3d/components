<!-- avatar-skin-editor-button.html -->

<h4>Skin Editor:</h4>
<div id="avatar-skin-editor-button" class="form-control btn btn-default btn-white-outline">Open skin editor panel</div>


<script>

    var dialogTargetEventListenersScript = "/js/dialogTargetEventListeners.js";
    $.getScript(dialogTargetEventListenersScript, function(script, status, xhr){
        debugMode && console.log("dialogTargetEventListeners:", status);
    });

</script>


<script>

    var target;
    var componentsFolder = "/components/";
    var skinEditorButtonSelector = "#avatar-skin-editor-button";
    var AvatarEditorPanelScript  = "/js/avatar-editor-panel.js";
    $.getScript(AvatarEditorPanelScript, function(script, status, xhr){
        debugMode && console.log("avatar-editor-panel:", status);
    });

</script>


<script>

//  Define target.
    $(skinEditorButtonSelector).on("click", function (){
        if ( !$AvatarEditorPanel.active ){
            target = localPlayer.outfit.body.material.materials[0];
        } else {
            target = undefined;
        }
    });

//  Import dialog components.
    $(skinEditorButtonSelector).on("click", function (){
        if (!!target && !$AvatarEditorPanel.active){

            $AvatarEditorPanel.dialog( "option", {
                width: 616,
                minWidth: 616,
                maxWidth: 616,
                height: 600,
                minHeight: 600,
                maxHeight: 600
            });

            var size = 1024;
            var title = "Avatar Skin Editor";
            $AvatarEditorPanel.loadMaterialPanel(title, size);
        }
    });


//  Open/Close dialog.
    $(skinEditorButtonSelector).on("click", function (){
        if ( !$AvatarEditorPanel.active ) {
            $AvatarEditorPanel.dialog("open");
        } else {
            $AvatarEditorPanel.dialog("close");
        }
    });

</script>



